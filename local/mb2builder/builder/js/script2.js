/**
 *
 * @package    local_mb2builder
 * @copyright  2018 - 2020 Mariusz Boloz (https://mb2themes.com/)
 * @license    Commercial https://themeforest.net/licenses
 */
jQuery(document).ready(function(t){var a=t("#mb2-pb-lang");function e(t,a){var e=a.find(".owl-carousel"),s=a;t.attr("data-selector")&&(s=a.find(t.attr("data-selector"))),e.length?(e.owlCarousel("destroy"),a.attr("data-"+t.attr("data-attrname"),t.val()),t.attr("data-ignorecarousel")&&(t.attr("data-class_remove")&&s.removeClass(t.attr("data-class_remove")),s.addClass(t.attr("data-class_prefix")+t.val())),i(e)):(t.attr("data-class_remove")&&s.removeClass(t.attr("data-class_remove")),s.addClass(t.attr("data-class_prefix")+t.val()))}t(document).on("click",".mb2-pb-element",function(t){t.preventDefault()}),t(document).on("click",".mb2-pb-builder-toggle",function(a){a.preventDefault(),t(this).closest(".mb2-pb-container").find(".mb2-pb-builder-toggle-content").slideToggle(250),t(this).toggleClass("active")}),t(".mb2-pb-accordion").each(function(){var a=t(this);a.find('[data-toggle="collapse"]').each(function(){t(this).on("click",function(){t(this).hasClass("collapsed")?a.attr("data-accordion_active",t(this).index('[data-toggle="collapse"]')+1):a.attr("data-accordion_active",0),c()})})});var s;t(".mb2-pb-sortable-columns");function n(){o("section"),o("row"),o("column"),o("element"),o("subelement"),o("tab")}function o(a){var e=t(".mb2-pb-sortable-"+a+"s");(function t(){return"function"==typeof e.sortable||(setTimeout(t,100),!1)})()&&e.sortable({axis:"element"!==a&&"subelement"!==a&&("column"===a?"x":"y"),placeholder:"ui-state-highlight",forcePlaceholderSize:!0,handle:"."+a+"-drag-handle",connectWith:"column"!==a&&"subelement"!==a&&"tab"!==a&&".mb2-pb-sortable-"+a+"s",opacity:.95,start:function(a,s){var n=t(s.item).outerHeight(!0),o=t(s.item).outerWidth(!0);e.find(">.ui-state-highlight").addClass(t(s.item).attr("class")),e.find(">.ui-state-highlight").css("height",n),e.find(">.ui-state-highlight").css("width",o)},stop:function(a,e){if(e.item.closest(".mb2-pb-element").hasClass("mb2-pb-carousel")&&function(a){var e=a.closest(".mb2-pb-element").find(".owl-carousel"),s=[],n=0;for(e.owlCarousel("destroy"),a.closest(".mb2-pb-element").find(".mb2-pb-carousel_item").each(function(){s[n]=t(this).attr("data-pbid"),n++}),x=0;x<s.length;x++){var o=e.find('.mb2-pb-carousel-item[data-pbid="'+s[x]+'"]');e.append(o)}i(e)}(e.item),e.item.hasClass("mb2-pb-carousel")){var s=e.item.find(".owl-carousel");s.owlCarousel("destroy"),i(s)}c()}})}function i(a){var e=a.closest(".mb2-pb-element"),s=e.attr("data-columns"),n=0!=e.attr("data-sloop"),o=0!=e.attr("data-snav"),i=0!=e.attr("data-sdots"),r=0!=e.attr("data-autoplay"),l=e.attr("data-pausetime"),c=e.attr("data-animtime"),d=e.attr("data-mobcolumns"),m=30;"thin"===e.attr("data-gutter")?m=10:"none"===e.attr("data-gutter")&&(m=0);var b=s>3?3:s,p=s>5?5:s,u={0:{items:1},600:{items:s>2?2:s},780:{items:b},1000:{items:p}};1==d&&(u={0:{items:2},600:{items:b},780:{items:p},1000:{items:p}});var f=!1,h=['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'];t("body").hasClass("dir-rtl")&&(f=!0,h=['<i class="fa fa-angle-right"></i>','<i class="fa fa-angle-left"></i>']),function t(){return"function"==typeof a.owlCarousel||(setTimeout(t,100),!1)}()&&a.owlCarousel({margin:m,loop:n,nav:o,rtl:f,dots:i,autoplay:r,responsive:u,autoplayHoverPause:!0,autoplayTimeout:l,smartSpeed:c,navText:h})}function r(a,e){a.find(".mb2-pb-animnum_item").each(function(){var a=t(this),s=!0;e?l(a):a.bind("inview",function(t,e){e&&s&&(s=!1,setTimeout(function(){l(a)},350))})})}function l(t){var a=t.find(".pbanimnum-number"),e=t.closest(".mb2-pb-animnum").attr("data-aspeed");e=Number(e),t.prop("Counter",0).stop().animate({Counter:t.attr("data-number")},{duration:e,easing:"swing",step:function(t){a.text(this.Counter.toFixed())}})}function c(){var a=t("#mb2-pb-form-democontent"),e=a.attr("data-url"),s=JSON.stringify(k(!1));t("#democontent").val(s),t.ajax({type:"POST",url:e,data:a.serialize(),beforeSend:function(){},error:function(t,a,e){},success:function(t){}})}function d(t){var a="";if("object"==typeof t){for(const[e,s]of Object.entries(t))"col"!==e&&(a+=s?" data-"+e+'="'+s+'"':"");return a}}function m(t){var a="";if("object"==typeof t){a+=' style="';for(const[e,s]of Object.entries(t))"bgimage"!==e&&"height"!==e||!s||(a+="bgimage"===e?"background-image:url('"+s+"');":"",a+="height"===e?"min-height:"+s+"px;":"");return a+='"'}}function b(t){var a=0,e="",s=[{name:"mobcenter",prefix:"mobcenter"},{name:"align",prefix:"align-"},{name:"scheme",prefix:""},{name:"custom_class",prefix:""}];for(a=0;a<s.length;a++)void 0!==t&&(e+=" "+s[a].prefix+t[s[a].name]);return e}function p(e){var s,n="",o=[12],i=[],r=[],l=[],c=[],p=[],u=0,f=0;12!==e&&(o=e.split(","));var h=t(".mb2-pb-row-active");for((s=h.length)&&h.find(".mb2-pb-column").each(function(a,e){i[a]=t(this).find(".mb2-pb-sortable-elements").html(),r[a]=D(t(this)),l[a]=t(this).attr("style"),c[a]=t(this).find(".column-inner").attr("style"),p[a]=t(this).find(".column-inner-bg").attr("style")}),f=0;f<o.length;f++){if(n+='<div class="mb2-pb-column col-md-'+o[f]+b(r[f])+'" data-col="'+o[f]+'"'+d(r[f])+m(r[f])+">",n+='<div class="column-helper"></div>',n+='<div class="mb2-pb-actions">',n+="<span>"+a.data("col")+"</span>",n+='<span href="#" class="column-drag-handle" title="'+a.data("move")+'">',n+='<i class="fa fa-arrows"></i> ',n+="</span>",n+='<a href="#" class="settings-column" title="'+a.data("settings")+'" data-toggle="modal" data-target="#mb2-pb-modal-settings-column">',n+='<i class="fa fa-pencil"></i> ',n+="</a>",n+="</div>",n+='<div class="column-inner" style="'+(c[f]?c[f]:"padding-bottom:30px")+'">',n+='<div class="mb2-pb-sortable-elements clearfix">',s&&f==o.length-1){if(i.length>f)for(u=f;u<i.length;u++)n+=i[u]}else i[f]&&(n+=i[f]);n+="</div>",n+="</div>",n+='<div class="mb2-pb-column-footer">',n+='<a href="#" class="mb2-pb-add-element" title="'+a.data("addelement")+'" data-toggle="modal" data-target="#mb2-pb-modal-elements">&plus; '+a.data("addelement")+"</a>",n+="</div>",n+='<div class="column-inner-bg" style="'+p[f]+'"></div>',n+="</div>"}return n}function u(a){var e=(new Date).getTime(),s=0,n=0,o=[];a.find(".owl-carousel").owlCarousel("destroy"),a.find(".mb2-pb-carousel-item").each(function(){o[++s]=e+s,t(this).attr("data-pbid",e+s)}),a.find(".mb2-pb-subelement").each(function(){n++,t(this).attr("data-pbid",o[n])}),i(a.find(".owl-carousel"))}function f(a){var e=(new Date).getTime(),s=0;a.attr("id","theme-accordion-"+e),a.find(".mb2-pb-accordion_item").each(function(){s++,t(this).find("[data-parent]").attr("data-parent","#theme-accordion-"+e),t(this).find('[data-toggle="collapse"]').attr("data-target","#accordion-item-"+e+s),t(this).find('[data-toggle="collapse"]').attr("aria-controls","#accordion-item-"+e+s),t(this).find(".collapse").attr("id","accordion-item-"+e+s)})}function h(a,e){var s=(new Date).getTime(),n=0;e?a.find(".nav-link").each(function(){n++;var a=t(this).attr("aria-controls");t(this).attr("href","#tab-"+s+n),t(this).attr("aria-controls","tab-"+s+n);var e=t(this).closest(".mb2-pb-tabs").find('[id="'+a+'"]');e.attr("id","tab-"+s+n),e.attr("aria-labelledby","tab-"+s+n)}):(a.find(".nav-link").attr("href","#tab-"+s),a.find(".nav-link").attr("aria-controls","tab-"+s),a.find(".tab-pane").attr("id","tab-"+s),a.find(".tab-pane").attr("aria-labelledby","tab-"+s))}function v(a,e){a.closest(".mb2-pb-tabs").find(".nav-link").removeClass("active"),a.closest(".mb2-pb-tabs").find(".tab-pane").removeClass("active"),e.addClass("active"),t('[id="'+e.attr("aria-controls")+'"]').addClass("active")}function g(e){if(t("body").hasClass("modal-open"))return alert(a.data("cantopenmodal")),e.stopImmediatePropagation()}function y(){t(".mb2-pb-section").removeClass("mb2-pb-section-active"),t(".mb2-pb-row").removeClass("mb2-pb-row-active"),t(".mb2-pb-column").removeClass("mb2-pb-column-active"),t(".mb2-pb-element").removeClass("mb2-pb-element-active"),t(".mb2-pb-subelement").removeClass("mb2-pb-subelement-active")}function w(a,s,o){var r=a.closest(".mb2-pb-"+s),l=(new Date).getTime();y(),r.addClass("mb2-pb-"+s+"-active"),t("#mb2-pb-modal-settings-"+s).find(".modal-body").empty();var c=t("#tab-settings-"+s+o).clone(!0),d=t("#mb2-pb-modal-settings-"+s).find(".modal-body").append(c);d.find(".nav-tabs a").each(function(){t(this).attr("href",t(this).attr("href")+"_modal")}),d.find(".tab-pane").each(function(){t(this).attr("id",t(this).attr("id")+"_modal")}),d.find(".mb2-pb-radio-el").each(function(){var a=t(this).attr("data-valid")+"_"+l;t(this).find("input").attr("id",a),t(this).find("label").attr("for",a)});var m=d.find(".mb2-pb-editor");m.length>0&&(t(".mb2-pb-editor").removeClass("mb2-pb-active-editor"),t(".mb2-pb-editor-document").removeAttr("contenteditable"),t(".mb2-pb-editor-document").removeClass("mb2-pb-editor-document-active"),t(".mb2-pb-editor-document").attr("id","mb2-pb-editor-document-active"),m.addClass("mb2-pb-active-editor"),d.find(".mb2-pb-editor-document").attr("contenteditable","true"),d.find(".mb2-pb-editor-document").addClass("mb2-pb-editor-document-active"),d.find(".mb2-pb-editor-document").removeAttr("id")),d.find(".mb2-pb-input").each(function(){var a,s=t(this),o=r.attr("data-"+s.attr("data-attrname"));(void 0!==(o=function(t){if(void 0===t)return;if("number"==typeof t)return t;return t.replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}(o))&&("radio"===s.attr("type")?(s.prop("checked",!1),s.attr("value")==o&&(s.closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),s.prop("checked",!0),s.closest(".mb2-pb-radio-el").addClass("checked"))):s.val(o)),s.hasClass("mb2-pb-editor-input")&&local_mb2builder_helper_editor_init(o,s,r),s.hasClass("mb2-pb-input-type-icon"))&&((a=o||s.val())&&(s.closest(".mb2-pb-form-group").find("i").attr("class",a),s.closest(".mb2-pb-form-group").find("i").show()));s.hasClass("mb2-pb-input-type-image")&&((a=o||s.val())&&(s.closest(".mb2-pb-form-group").removeClass("isvideo"),local_mb2builder_check_image(a)||s.closest(".mb2-pb-form-group").addClass("isvideo"),s.closest(".mb2-pb-form-group").find("img").attr("src",a),s.closest(".mb2-pb-form-group").find(".mb2-pb-desc-image").text(local_mb2builder_get_media_name(a)),s.closest(".mb2-pb-form-group").find("img").show()));!function(a,s){switch(a.attr("data-action")){case"style":return function(a,e){var s=e,n="change",o="px",i=!1;a.attr("data-changemode")&&(n=a.attr("data-changemode"));a.attr("data-style_suffix")&&"rem"===(o=a.attr("data-style_suffix"))&&(i=!0);"none"===o&&(o="");a.attr("data-selector")&&(s=e.find(a.attr("data-selector")));"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on(n,function(){s.css(t(this).attr("data-style_properity"),t(this).val()+o),t(this).attr("data-style_properity2")&&s.css(t(this).attr("data-style_properity2"),t(this).val()+o),t(this).attr("data-numclass")&&function(a,e,s){var n=[0,50,100,150,200,250],o=0,i=a.attr("data-sizepref")+"-";s&&(n=[1,2,3,4,5]);"column"===a.attr("data-numclasselector")&&(e=t(".mb2-pb-column-active"));for(o=0;o<n.length;o++)a.val()>n[o]&&(e.removeClass(i+n.join(" "+i)),e.addClass(i+n[o]),a.attr("data-numclassattr")&&e.attr("data-"+a.attr("data-numclassattr"),n[o]),a.attr("data-setval")&&t(".modal.show").find('[data-attrname="'+a.attr("data-setval")+'"]').val(n[o]))}(t(this),s,i),e.attr("data-"+t(this).attr("data-attrname"),t(this).val()),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val())})}(a,s);case"color":return function(t,a){t.focus(),t.spectrum({showInput:!0,showButtons:!1,preferredFormat:"rgb",allowEmpty:!0,color:"",showAlpha:!0,change:function(e){_(e,t,a)},move:function(e){_(e,t,a)}})}(a,s);case"class":return function(a,s){var o=s,i="change";a.attr("data-changemode")&&(i=a.attr("data-changemode"));"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on(i,function(){t(this).attr("data-selector")&&(o=s.find(t(this).attr("data-selector"))),s.attr("data-"+a.attr("data-attrname"),t(this).val()),s.attr("data-carousel")?e(t(this),s):function(t,a,e){t.attr("data-class_remove")&&(e.removeClass(t.attr("data-class_remove")),t.attr("data-selector2")&&a.find(t.attr("data-selector2")).removeClass(t.attr("data-class_remove")));a.attr("data-"+t.attr("data-attrname"),t.val()),e.addClass(t.attr("data-class_prefix")+t.val()),t.attr("data-selector2")&&a.find(t.attr("data-selector2")).addClass(t.attr("data-class_prefix")+t.val());if(a.hasClass("mb2-pb-list")&&"style"===t.attr("data-attrname")){var s=a.find("ol");"number"===t.val()&&(e.replaceWith('<ol class="'+e.attr("class")+'">'+e.html()+"</ol>"),n()),"number"!==t.val()&&s.length&&(s.replaceWith('<ul class="'+s.attr("class")+'">'+s.html()+"</ul>"),n())}}(t(this),s,o),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})}(a,s);case"text":return function(a,e){a.on("input",function(){var a=e;t(this).attr("data-parent")&&(a=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var s=a;t(this).attr("data-selector")&&(s=a.find(t(this).attr("data-selector")));var n=local_mb2builder_strip_html(t(this).val());n=local_mb2builder_replace_text(n),""===t(this).val()&&t(this).attr("data-default")&&(n=t(this).attr("data-default")),e.attr("data-"+t(this).attr("data-attrname"),n),s.html(n)})}(a,s);case"attribute":return function(a,e){"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on("input",function(){var a=e;t(this).attr("data-parent")&&(a=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var s=a;t(this).attr("data-selector")&&(s=a.find(t(this).attr("data-selector")));var n=local_mb2builder_strip_html(t(this).val());n=local_mb2builder_replace_text(n),""===t(this).val()&&t(this).attr("data-default")&&(n=t(this).attr("data-default")),e.attr("data-"+t(this).attr("data-attrname"),n),s.attr(t(this).attr("data-attribute"),n),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val())})}(a,s);case"callback":return function(a,s){var n="change";a.attr("data-changemode")&&(n=a.attr("data-changemode"));"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on(n,function(){"carousel"===t(this).attr("data-callback")?e(t(this),s):"layout-carousel"===t(this).attr("data-callback")?function(t,a){var e=a.find(".mb2-pb-content-list");a.attr("data-"+t.attr("data-attrname"),t.val()),1==t.val()?(e.removeClass("theme-boxes"),e.removeClass("theme-col-"+a.attr("data-columns")),e.removeClass("gutter-"+a.attr("data-gutter")),e.addClass("owl-carousel"),i(e)):(e.owlCarousel("destroy"),e.removeClass("owl-carousel"),e.addClass("theme-boxes"),e.addClass("theme-col-"+a.attr("data-columns")),e.addClass("gutter-"+a.attr("data-gutter")))}(t(this),s):"accordion-parent"===t(this).attr("data-callback")&&function(t,a){var e=a.attr("id"),s=a.find('[data-toggle="collapse"]'),n=a.find(".collapse");1==t.val()?(s.attr("data-parent","#"+e),n.attr("data-parent","#"+e)):(s.attr("data-parent",""),n.attr("data-parent",""))}(t(this),s),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})}(a,s);case"ajax":return function(a,e){var s="change";a.attr("data-changemode")&&(s=a.attr("data-changemode"));"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on(s,function(){var a=e.find(".owl-carousel"),s=e.find(".mb2-pb-content-list"),n=e.find(".videowebiframe");a.length&&e.find(".owl-carousel").owlCarousel("destroy"),e.attr("data-"+t(this).attr("data-attrname"),t(this).val());var o=D(e);o=jQuery.param(o);var r=t(".mb2-pb-settings").data("baseurl")+"/local/mb2builder/ajax/"+e.attr("data-id")+".php?"+o+"&sesskey="+t(".mb2-pb-settings").attr("data-sesskey");t.ajax({url:r,type:"get",dataType:"html",beforeSend:function(){e.find(".mb2-pb-actions-loading").fadeIn(150)},error:function(t,a,e){},success:function(t){s.length&&s.html(t),n.length&&n.attr("src",t),a.length&&i(a),setTimeout(function(){e.find(".mb2-pb-actions-loading").fadeOut(150)},350)}}),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})}(a,s);case"none":return function(a,e){var s="change";a.attr("data-changemode")&&(s=a.attr("data-changemode"));a.on(s,function(){"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})}(a);case"data":(function(a,e){a.on("input",function(){e.attr("data-"+t(this).attr("data-attrname"),t(this).val())})})(a,s)}}(s,r)});var b=t(".mb2-pb-"+s+"-active").attr("data-elname");t("#mb2-pb-modal-settings-"+s).find(".modal-title").text(b),d.find("[data-showon_field]").each(function(){var a=t(this),e=a.data("showon_field"),s=a.data("showon_value").toString().split("|"),n=d.find('[data-attrname="'+e+'"]'),o=n.val();"radio"===n.attr("type")&&(o=d.find('[data-attrname="'+e+'"]:checked').val()),t('[data-showon_field="'+e+'"]').closest(".form-group").hide();var i=t.inArray(o,s);-1!=i&&t('[data-showon_field="'+e+'" ][data-showon_value*="'+o+'"]').closest(".form-group").show(),t(document).on("change",'[data-attrname="'+e+'"]',function(){i=t.inArray(t(this).val(),s),t('[data-showon_field="'+e+'"]').closest(".form-group").hide(),-1!=i&&t('[data-showon_field="'+e+'" ][data-showon_value*="'+t(this).val()+'"]').closest(".form-group").show()})})}function C(a){t("#mb2-pb-modal-settings-"+a).find(".mb2-pb-input").each(function(){var e=t(this),s=t(".mb2-pb-"+a+"-active"),n=e.attr("data-attrname"),o=e.val();if(e.hasClass("mb2-pb-editor-input")&&(local_mb2builder_helper_editor_update_from_textarea_before_save(),o=local_mb2builder_helper_editor_get_clean_html()),"text"===e.attr("data-action")&&(o=local_mb2builder_strip_html(o),o=local_mb2builder_replace_text(o)),"radio"===e.attr("type")?e.is(":checked")&&s.attr("data-"+n,o):s.attr("data-"+n,o),"sectionlang"===n||"rowlang"===n){var i="",r="";""!==o&&(i="(",r=")"),s.find(">div>.mb2-pb-language").text(i+o+r)}if("sectionaccess"===n||"rowaccess"===n){var l="";1==o?l='<i class="fa fa-lock"></i>':2==o&&(l='<i class="fa fa-unlock"></i>'),s.find(">div>.mb2-pb-access").html(l)}n===a+"hidden"&&(1==o?s.addClass("hiddenel"):s.removeClass("hiddenel"))}),y()}function _(a,e,s){var n="",o="";a&&(n=a.toRgbString());var i=s;e.attr("data-parent")&&(i=s.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+s.attr("data-pbid")+'"]'));var r=i;if(e.attr("data-selector")&&(r=i.find(e.attr("data-selector"))),e.attr("data-selector2")&&(o=i.find(e.attr("data-selector2"))),e.attr("data-colorclass")&&n?r.addClass("color1"):r.removeClass("color1"),e.attr("data-globalparent"))s.find(".mb2-pb-subelement").each(function(){t(this).attr("data-"+e.attr("data-attrname"))||t(this).find(e.attr("data-selector")).css(e.attr("data-style_properity"),n)});else if(e.attr("data-globalchild")&&!n){var l=s.closest(".mb2-pb-element");r.css(e.attr("data-style_properity"),l.attr("data-"+e.attr("data-attrname")))}else s.attr("data-"+e.attr("data-attrname"),n),r.css(e.attr("data-style_properity"),n),e.attr("data-selector2")&&o.css(e.attr("data-style_properity"),n)}function k(a){var e=[];return(a?t("#mb2-pb-demo-iframe").contents().find(".mb2-pb-container"):t(".mb2-pb-container")).each(function(a){var s=t(this),n=a,o=D(s);delete o.sortableItem,e[n]={type:"mb2pb_page",settings:o,attr:[]},s.find(".mb2-pb-section").each(function(a){var s=t(this),o=a,i=D(s);delete i.sortableItem,e[n].attr[o]={type:"mb2pb_section",settings:i,attr:[]},s.find(".mb2-pb-row").each(function(a){var s=t(this),i=a,r=D(s);delete r.sortableItem,e[n].attr[o].attr[i]={type:"mb2pb_row",settings:r,attr:[]},s.find(".mb2-pb-column").each(function(a){var s=t(this),r=a,l=D(s);delete l.sortableItem,e[n].attr[o].attr[i].attr[r]={type:"mb2pb_col",settings:l,attr:[]},s.find(".mb2-pb-element").each(function(a){var s=t(this),l=a,c=D(s);delete c.sortableItem,e[n].attr[o].attr[i].attr[r].attr[l]={type:"mb2pb_el",settings:c,attr:[]},s.find(".mb2-pb-subelement").each(function(a){var s=a,c=D(t(this));delete c.sortableItem,e[n].attr[o].attr[i].attr[r].attr[l].attr[s]={type:"mb2pb_subel",settings:c,attr:[]}})})})})})}),e}function D(a){var e={};return t.each(a[0].attributes,function(){this.name.includes("data-")&&this.specified&&(e[this.name.replace("data-","")]=local_mb2builder_replace_text(this.value))}),e}n(),t(".mb2-pb-container .owl-carousel").each(function(){i(t(this))}),t("#page-admin-local-mb2builder-edit-page .mform").on("submit",function(){var a=JSON.stringify(k(!0));t('[name="content"]').val(a),t('[name="democontent"]').val(a)}),t(".mb2-pb-animnum_item").each(function(){r(t(this).closest(".mb2-pb-animnum"),!1)}),t(document).on("click",".mb2-pb-animnum-run",function(a){a.preventDefault();var e=t(".mb2-pb-animnum.mb2-pb-element-active");e.find(".pbanimnum-number").text("0"),r(e,!0)}),(s=t("#mb2-pb-form-savelayout")).on("submit",function(e){if(e.preventDefault(),!t("#savelayoutname").val()&&0==t("#editlayoutid").val())return t("#savelayoutname").css("border-color","red"),t("#savelayoutname").closest("div").find(".mb2-pb-error").show(),null;t("#savelayoutname").attr("style",""),t("#savelayoutname").closest("div").find(".mb2-pb-error").hide();var n=t(this).find(".btn");n.val(a.data("processing")),n.attr("disabled","disabled");var o=t(this).attr("data-url"),i=JSON.stringify(k(!1));t("#savelayoutcontent").val(i),t.ajax({type:"POST",url:o,data:t(this).serialize(),beforeSend:function(){},error:function(t,a,e){t.status,t.statusText},success:function(e){setTimeout(function(){n.removeAttr("disabled"),n.val(a.data("selectlayout")),t("#savelayoutname").val(""),t("#editlayoutid").val(0),s.find(".mb2-pb-success").show(),setTimeout(function(){s.find(".mb2-pb-success").hide()},1e4)},600)}})}),function(){var e=t("#mb2-pb-form-importlayout");e.on("submit",function(s){s.preventDefault();var o=t('[name="importlayoutkeep"]');if(0==t("#importlayoutid").val())return t("#importlayoutid").css("border-color","red"),t("#importlayoutid").closest("div").find(".mb2-pb-error").show(),null;t("#importlayoutid").attr("style",""),t("#importlayoutid").closest("div").find(".mb2-pb-error").hide(),t(".mb2-pb-overlay.main-overlay").fadeIn(180);var l=t(this).find(".btn");l.val(a.data("processing")),l.attr("disabled","disabled");var d=t(this).attr("data-url");t.ajax({type:"POST",url:d,data:t(this).serialize(),dataType:"html",beforeSend:function(){},error:function(t,a,e){},success:function(s){t("#importlayoutid").val(0),o.prop("checked")?t(".mb2-pb-container").first().find(".mb2-pb-sortable-sections").append(s):t(".mb2-pb-container").first().find(".mb2-pb-sortable-sections").html(s),c(),t(".mb2-pb-overlay.main-overlay").fadeOut(180),n(),t(".mb2-pb-container").find(".owl-carousel").each(function(){i(t(this))}),t(".mb2-pb-container").find(".mb2-pb-animnum").each(function(){r(t(this),!1)}),setTimeout(function(){l.removeAttr("disabled"),l.val(a.data("importlayoutbtn")),e.find(".mb2-pb-success").show(),setTimeout(function(){e.find(".mb2-pb-success").hide()},1e4)},600)}})})}(),t(document).on("click",".mb2-pb-import-part",function(a){a.preventDefault();var e=t(this).attr("data-part"),s=D(t(this));s=jQuery.param(s);var o=t(".mb2-pb-settings").data("baseurl")+"/local/mb2builder/ajax/import-blocks.php?"+s+"&sesskey="+t(".mb2-pb-settings").attr("data-sesskey");t(".mb2-pb-overlay.main-overlay").fadeIn(180),t.ajax({url:o,type:"get",dataType:"html",beforeSend:function(){},error:function(t,a,e){},success:function(a){"layouts"===e?t(".mb2-pb-container").find(".mb2-pb-sortable-sections").html(a):t(".mb2-pb-section").first().find(".mb2-pb-sortable-rows").append(a),c(),t(".mb2-pb-overlay.main-overlay").fadeOut(180),n(),t(".mb2-pb-container").find(".owl-carousel").each(function(){i(t(this))}),t(".mb2-pb-container").find(".mb2-pb-animnum").each(function(){r(t(this),!1)})}})}),t(document).on("click",".mb2-pb-page-cancel, .mb2-pb-modal .close",function(a){var e;e=window.parent.$("#mb2-pb-demo-iframe"),t(".mb2-pb-overlay.main-overlay").fadeIn(180),e.attr("src",e.attr("src"))}),t(document).on("click",".mb2-pb-row-toggle,.layout-row",function(a){a.preventDefault(),t(".mb2-pb-section").removeClass("mb2-pb-section-active"),t(".mb2-pb-row").removeClass("mb2-pb-row-active"),t(this).closest(".mb2-pb-section").addClass("mb2-pb-section-active"),t("#mb2-pb-modal-row-layout").find(".mb2-pb-row-variant").removeClass("update"),t(this).hasClass("layout-row")&&(t(".mb2-pb-row").removeClass("mb2-pb-row-active"),t(this).closest(".mb2-pb-row").addClass("mb2-pb-row-active"),t("#mb2-pb-modal-row-layout").find(".mb2-pb-row-variant").addClass("update"))}),t(document).on("click",".mb2-pb-row-variant",function(a){a.preventDefault();var e=t(this).data("row_variant"),s=function(a){var e=t(".mb2-pb-template-row").clone();e.removeClass("mb2-pb-template-row");var s=p(a);return e.find(".mb2-pb-sortable-columns").append(s),e}(e),o=t(".mb2-pb-section-active").find(".mb2-pb-sortable-rows");t(this).hasClass("update")&&((o=t(".mb2-pb-row-active").find(".mb2-pb-sortable-columns")).find(".owl-carousel").owlCarousel("destroy"),s=p(e),o.empty());o.append(s),i(o.find(".owl-carousel")),y(),n(),c()}),t(document).on("click",".mb2-pb-add-element",function(a){a.preventDefault(),t(".mb2-pb-column").removeClass("mb2-pb-column-active"),t(this).closest(".mb2-pb-column").addClass("mb2-pb-column-active"),n()}),t(document).on("click",".mb2-pb-modal-el",function(a){a.preventDefault();var e=function(a,e,s){var n=t(".mb2-pb-template-"+a).clone();return n.removeClass("mb2-pb-template-"+a),n.attr("data-id",a),"accordion"===a&&f(n),"tabs"===a&&h(n,!1),"carousel"===a&&u(n),"animnum"===a&&r(n,!0),(e=n.find(".mb2-pb-subelement")).length&&e.attr("data-id",s),n}(t(this).data("id"),t(this).data("subelement"),t(this).data("subelement_name"));t(".mb2-pb-column-active").find(".mb2-pb-sortable-elements").append(e),y(),n(),c()}),t(document).on("click",".settings-element",function(a){a.preventDefault(),g(a),t(this).unbind("click");var e=t(this).closest(".mb2-pb-element").data("id");w(t(this),"element","-"+e)}),t(document).on("click","#save-settings-element",function(t){C("element"),c()}),t(document).on("click",".duplicate-element",function(a){a.preventDefault(),t(this).closest(".mb2-pb-element").hasClass("mb2-pb-carousel")&&t(this).closest(".mb2-pb-element").find(".owl-carousel").owlCarousel("destroy");var e=t(this).closest(".mb2-pb-element").clone();t(this).closest(".mb2-pb-element").hasClass("mb2-pb-carousel")&&i(t(this).closest(".mb2-pb-element").find(".owl-carousel")),t(this).closest(".mb2-pb-sortable-elements").append(e),e.hasClass("mb2-pb-accordion")&&f(e),e.hasClass("mb2-pb-tabs")&&h(e,!0),e.hasClass("mb2-pb-carousel")&&u(e),n(),c()}),t(document).on("click",".remove-element",function(e){e.preventDefault(),confirm(a.data("remove")+": "+t(this).closest(".mb2-pb-element").attr("data-elname")+"?")&&(t(this).closest(".mb2-pb-element").remove(),c())}),t(document).on("click",".mb2-pb-add-subelement",function(t){t.preventDefault(),n(),c()}),t(document).on("click",".settings-subelement",function(a){a.preventDefault(),g(a);var e,s,n=t(this).closest(".mb2-pb-element").data("id");if(t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-tabs_item"))v(t(this).closest(".theme-tabs").find(".nav-link"),t(this).closest(".mb2-pb-subelement").find(".nav-link"));else if(t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-accordion_item")){var o=t(this).closest(".mb2-pb-subelement");(s=(e=o).closest(".mb2-pb-element").find("[data-collapse]")).attr("aria-expanded","false"),s.addClass("collapsed"),e.closest(".mb2-pb-element").find(".collapse").removeClass("show"),e.find("[data-collapse]").attr("aria-expanded","true"),e.find("[data-collapse]").removeClass("collapsed"),e.find(".collapse").addClass("show")}w(t(this),"subelement","-"+n)}),t(document).on("click","#save-settings-subelement",function(){C("subelement"),c()}),t(document).on("click",".duplicate-subelement",function(a){a.preventDefault();var e=t(this).closest(".mb2-pb-subelement").clone();if(t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-accordion_item")){var s="accordion_item"+(new Date).getTime();e.find('[data-toggle="collapse"]').attr("data-target","#"+s),e.find('[data-toggle="collapse"]').attr("aria-controls","#"+s),e.find(".collapse").removeClass("show"),e.find(".collapse").attr("id",s)}t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-tabs_item")&&function(t,a){var e=(new Date).getTime(),s=t.closest(".mb2-pb-subelement").find(".nav-link"),n=a.find(".nav-link"),o=s.closest(".mb2-pb-tabs").find('[id="'+s.attr("aria-controls")+'"]').clone();n.attr("href","#tab-"+e),n.attr("aria-controls","tab-"+e),o.attr("id","tab-"+e),o.attr("aria-labelledby","tab-"+e),s.closest(".mb2-pb-tabs").find(".tab-content").append(o),v(s,n)}(t(this),e),t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-carousel_item")&&function(t,a){var e=(new Date).getTime(),s=t.closest(".mb2-pb-subelement"),n=t.closest(".mb2-pb-element").find(".owl-carousel");n.owlCarousel("destroy");var o=t.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+s.attr("data-pbid")+'"]').clone();a.attr("data-pbid",e),o.attr("data-pbid",e),n.append(o),i(n)}(t(this),e),t(this).closest(".mb2-pb-sortable-subelements").append(e),n(),c()}),t(document).on("click",".remove-subelement",function(e){if(e.preventDefault(),1!=t(this).closest(".mb2-pb-element").find(".mb2-pb-subelement").length){if(confirm(a.data("remove")+": "+t(this).closest(".mb2-pb-subelement").attr("data-elname")+"?")){var s=t(this).closest(".mb2-pb-subelement");if(s.hasClass("mb2-pb-carousel_item")){var n=s.closest(".mb2-pb-element").find(".owl-carousel");n.owlCarousel("destroy"),s.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+s.attr("data-pbid")+'"]').remove(),i(n)}s.remove(),c()}}else alert(a.data("cannotremove"))}),t(document).on("click",".settings-section",function(a){a.preventDefault(),g(a),w(t(this),"section","")}),t(document).on("click",".duplicate-section",function(a){a.preventDefault();var e=t(this).closest(".mb2-pb-section").clone();t(this).closest(".mb2-pb-sortable-sections").append(e),n(),c()}),t(document).on("click","#save-settings-section",function(){C("section"),c()}),t(document).on("click",".remove-section",function(e){e.preventDefault(),1!=t(this).closest(".mb2-pb-container").find(".mb2-pb-section").length?confirm(a.data("remove")+": "+t(this).closest(".mb2-pb-section").attr("data-elname")+"?")&&(t(this).closest(".mb2-pb-section").remove(),c()):alert(a.data("cannotremove"))}),t(document).on("click",".settings-row",function(a){g(a),w(t(this),"row",""),a.preventDefault()}),t(document).on("click",".duplicate-row",function(a){a.preventDefault();var e=t(this).closest(".mb2-pb-row").clone();t(this).closest(".mb2-pb-sortable-rows").append(e),n(),c()}),t(document).on("click","#save-settings-row",function(){C("row"),c()}),t(document).on("click",".remove-row",function(e){e.preventDefault(),confirm(a.data("remove")+": "+t(this).closest(".mb2-pb-row").attr("data-elname")+"?")&&(t(this).closest(".mb2-pb-row").remove(),c())}),t(document).on("click",".settings-column",function(a){g(a),w(t(this),"column",""),a.preventDefault()}),t(document).on("click","#save-settings-column",function(){C("column"),c()}),t(document).on("click",".element-items",function(a){a.preventDefault(),t(this).closest(".mb2-pb-element").find(".mb2-pb-sortable-subelements").slideToggle(250)})});
